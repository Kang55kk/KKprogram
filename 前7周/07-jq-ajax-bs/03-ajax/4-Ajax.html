<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <!-- 同步ajax -->
    <!-- <script>
      console.log("start");
      var xhr = new XMLHttpRequest();
      console.log(xhr.readyState, xhr.response);
      //   readyState => 0

      //   如需将请求发送到服务器，我们使用 XMLHttpRequest 对象的 open() 和 send() 方法：
      //   规定请求的类型、URL 以及是否异步处理请求。
      //  open(method,url,async) GET POST 方法   请求地址   是否异步
      xhr.open("GET", "./test.json", false);
      console.log(xhr.readyState, xhr.response);
      //   readyState => 1

      //  send(string) 将请求发送到服务器。

      xhr.send();
      console.log(xhr.readyState, xhr.response);
      //   readyState => 4 有响应 确切 是完成 并不代表一定成功 有可能是失败

      console.log("end");
    </script> -->

    <script>
      console.log("start");
      var xhr = new XMLHttpRequest();
      //   console.log(xhr.readyState, xhr.response);
      //   readyState => 0 0: 请求未初始化

      xhr.onreadystatechange = function () {
        if (xhr.readyState === 4) {
          if (xhr.status === 200) {
            // xhr.readyState === 4 只能代表 结束（完成）
            // xhr.status === 200 代表本次http请求 正常
            console.log("xhr.readyState", xhr.readyState, "===",typeof xhr.response, xhr.status);
          } else {
            console.log("完成了 但是失败了", xhr.status);
          }
        }
      };

      xhr.open("GET", "./test.json", true);
      //   console.log(xhr.readyState, xhr.response);
      //   readyState => 1  1: 服务器连接已建立(已准备好请求方法 地址等信息)

      //  send(string) 将请求发送到服务器。
      xhr.send();
      //   console.log(xhr.readyState, xhr.response);
      //   readyState => 1

      //   2: 请求已接收
      //   3: 请求处理中
      //   4: 请求已完成，且响应已就绪

      console.log("end");
      //   打印end时候 xhr.response还没有结果
    </script>
  </body>
</html>
